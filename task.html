<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task</title>
    <link rel="stylesheet" href="style/bootstrap.min.css">
    <link rel="stylesheet" href="style/fullcalendar.min.css">
    <link rel="stylesheet" href="style/global.css">
</head>
<body>
    
    <div class="container">

        <h3 class="shortcuts-tip">按 Option + Tab 试试看...(暂没适配 Windows)</h3>
        
        <div role="tabpanel">
            <!-- Nav tabs -->
            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active">
                    <a href="#task" aria-controls="task" role="tab" data-toggle="tab">Task</a>
                </li>
                <li role="presentation">
                    <a href="#calendar" aria-controls="calendar" role="tab" data-toggle="tab">Calendar</a>
                </li>
                <li role="presentation">
                    <a href="#other" aria-controls="other" role="tab" data-toggle="tab">Other</a>
                </li>
            </ul>

            <!-- Tab panes -->
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane task active" id="task">
                    <ul class="items">
                        <li>
                            <div class="task-item">
                                <dl class="action">
                                    <dt>1</dt>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-unchecked btn-task-checked"></a>
                                    </dd>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-bookmark btn-task-marker"></a>
                                    </dd>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-eye-open btn-task-details"></a>
                                    </dd>
                                </dl>
                                <input type="text" class="text" value="Task 1 ....">
                            </div>
                        </li>
                        <li>
                            <div class="task-item">
                                <dl class="action">
                                    <dt>2</dt>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-unchecked btn-task-checked"></a>
                                    </dd>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-bookmark btn-task-marker"></a>
                                    </dd>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-eye-open btn-task-details"></a>
                                    </dd>
                                </dl>
                                <input type="text" class="text" value="Task 2 ....">
                            </div>
                        </li>
                        <li>
                            <div class="task-item">
                                <dl class="action">
                                    <dt>3</dt>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-unchecked btn-task-checked"></a>
                                    </dd>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-bookmark btn-task-marker"></a>
                                    </dd>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-eye-open btn-task-details"></a>
                                    </dd>
                                </dl>
                                <input type="text" class="text" value="Task 3 ....">
                            </div>
                        </li>
                        <li>
                            <div class="task-item">
                                <dl class="action">
                                    <dt>4</dt>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-unchecked btn-task-checked"></a>
                                    </dd>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-bookmark btn-task-marker"></a>
                                    </dd>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-eye-open btn-task-details"></a>
                                    </dd>
                                </dl>
                                <input type="text" class="text" value="Task 4 ....">
                            </div>
                        </li>
                        <li>
                            <div class="task-item">
                                <dl class="action">
                                    <dt>5</dt>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-unchecked btn-task-checked"></a>
                                    </dd>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-bookmark btn-task-marker"></a>
                                    </dd>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-eye-open btn-task-details"></a>
                                    </dd>
                                </dl>
                                <input type="text" class="text" value="Task 5 ....">
                            </div>
                        </li>
                        <li>
                            <div class="task-item">
                                <dl class="action">
                                    <dt>6</dt>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-unchecked btn-task-checked"></a>
                                    </dd>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-bookmark btn-task-marker"></a>
                                    </dd>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-eye-open btn-task-details"></a>
                                    </dd>
                                </dl>
                                <input type="text" class="text" value="Task 6 ....">
                            </div>
                        </li>
                        <li>
                            <div class="task-item">
                                <dl class="action">
                                    <dt>7</dt>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-unchecked btn-task-checked"></a>
                                    </dd>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-bookmark btn-task-marker"></a>
                                    </dd>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-eye-open btn-task-details"></a>
                                    </dd>
                                </dl>
                                <input type="text" class="text" value="Task 7 ....">
                            </div>
                        </li>
                        <li>
                            <div class="task-item">
                                <dl class="action">
                                    <dt>8</dt>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-unchecked btn-task-checked"></a>
                                    </dd>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-bookmark btn-task-marker"></a>
                                    </dd>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-eye-open btn-task-details"></a>
                                    </dd>
                                </dl>
                                <input type="text" class="text" value="Task 8 ....">
                            </div>
                        </li>
                        <li>
                            <div class="task-item">
                                <dl class="action">
                                    <dt>9</dt>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-unchecked btn-task-checked"></a>
                                    </dd>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-bookmark btn-task-marker"></a>
                                    </dd>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-eye-open btn-task-details"></a>
                                    </dd>
                                </dl>
                                <input type="text" class="text" value="Task 9 ....">
                            </div>
                        </li>
                        <li>
                            <div class="task-item">
                                <dl class="action">
                                    <dt>10</dt>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-unchecked btn-task-checked"></a>
                                    </dd>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-bookmark btn-task-marker"></a>
                                    </dd>
                                    <dd>
                                        <a href="javascript:;" class="glyphicon glyphicon-eye-open btn-task-details"></a>
                                    </dd>
                                </dl>
                                <input type="text" class="text" value="Task 10 ....">
                            </div>
                        </li>
                    </ul>
                </div>
                <div role="tabpanel" class="tab-pane" id="calendar">
                    <div class="fullcalendar-container">
                        
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane" id="other">...</div>
            </div>
        </div>
        

        <div class="task-details ">
            <h2>任务详情：</h2>
            <ul class="action">
                <li>
                    <a href="javascript:;" class="btn-task-save">
                        <span class="glyphicon glyphicon-ok"></span>保存
                    </a>
                </li>
                <li>
                    <a href="javascript:;" class="btn-task-close">
                        <span class="glyphicon glyphicon-remove"></span>关闭
                    </a>
                </li>
            </ul>
            <div class="task-form">
                <form action="" class="form-horizontal">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">任务名称</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control"  placeholder="任务名称">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">任务描述</label>
                        <div class="col-sm-10">
                            <textarea name="" id=""  rows="3" class="form-control" placeholder="任务描述"></textarea>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">项目</label>
                        <div class="col-sm-4">
                            <select name="" id="" class="form-control">
                                <option value=""></option>
                                <option value="">SGM DFSS</option>
                                <option value="">绿色账户</option>
                            </select>
                        </div>
                        <label class="col-sm-2 control-label">负责人</label>
                        <div class="col-sm-4">
                            <select name="" id="" class="form-control">
                                <option value=""></option>
                                <option value="">高明</option>
                                <option value="">杨昊</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">委托人</label>
                        <div class="col-sm-4">
                            <select name="" id="" class="form-control">
                                <option value=""></option>
                                <option value="">高明</option>
                                <option value="">杨昊</option>
                            </select>
                        </div>
                        <label class="col-sm-2 control-label">参与人</label>
                        <div class="col-sm-4">
                            <select name="" id="" class="form-control">
                                <option value=""></option>
                                <option value="">高明</option>
                                <option value="">杨昊</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">截止日期</label>
                        <div class="col-sm-4">
                            <input type="date" class="form-control">
                        </div>
                        <label class="col-sm-2 control-label">提醒日期</label>
                        <div class="col-sm-4">
                            <input type="date" class="form-control">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">优先级</label>
                        <div class="col-sm-4">
                            <select name="" id="" class="form-control"></select>
                        </div>
                        <label class="col-sm-2 control-label">预估时间</label>
                        <div class="col-sm-4">
                            <input type="text" class="form-control">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">百分比</label>
                        <div class="col-sm-4">
                            <select name="" id="" class="form-control"></select>
                        </div>
                    </div>
                </form>
            </div>
        </div>



    </div>

</body>
<script src="script/jquery.js"></script>
<script src="script/bootstrap.min.js"></script>
<script src="script/jquery.dragsort.min.js"></script>
<script src="script/moment.min.js"></script>
<script src="script/fullcalendar.min.js"></script>
<script src="script/mousetrap.min.js"></script>
<script>
    
    // navs
    $('.nav-tabs a').click(function (e) 
    {
        e.preventDefault()
        $(this).tab('show')
    });

    // drog
    $(".task .items").dragsort(
    { 
        dragSelector: "dt", 
        dragBetween: true, 
        dragEnd: function(){}, 
        placeHolderTemplate: "<li class='placeHolder'></li>" 
    });

    // fullcalendar
    var isInitFullcalendar = false;
    $(document).delegate('.nav-tabs a[aria-controls="calendar"]', 'click', function()
    {
        if(isInitFullcalendar)
        {
            return;
        }
        isInitFullcalendar = true;

        $('.fullcalendar-container').fullCalendar(
        {
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,basicWeek,basicDay'
            },
            defaultDate: '2015-06-12',
            editable: true,
            eventLimit: true, // allow "more" link when too many events
            events: [
                {
                    title: 'All Day Event',
                    start: '2015-06-01'
                },
                {
                    title: 'Long Event',
                    start: '2015-06-07',
                    end: '2015-06-10'
                },
                {
                    id: 999,
                    title: 'Repeating Event',
                    start: '2015-06-09T16:00:00'
                },
                {
                    id: 999,
                    title: 'Repeating Event',
                    start: '2015-06-16T16:00:00'
                },
                {
                    title: 'Conference',
                    start: '2015-06-11',
                    end: '2015-06-13'
                },
                {
                    title: 'Meeting',
                    start: '2015-06-12T10:30:00',
                    end: '2015-06-12T12:30:00'
                },
                {
                    title: 'Lunch',
                    start: '2015-06-12T12:00:00'
                },
                {
                    title: 'Meeting',
                    start: '2015-06-12T14:30:00'
                },
                {
                    title: 'Happy Hour',
                    start: '2015-06-12T17:30:00'
                },
                {
                    title: 'Dinner',
                    start: '2015-06-12T20:00:00'
                },
                {
                    title: 'Birthday Party',
                    start: '2015-06-13T07:00:00'
                },
                {
                    title: 'Click for Google',
                    start: '2015-06-28'
                }
            ]
        });


    });

    // shortcuts
    Mousetrap.bind('option+tab', function() 
    { 
        switchTabs();
        return false;
    });


    function switchTabs()
    {
        var _index = $('.nav-tabs li.active').index();
        if(_index === 2)
        {
            _index = -1;
        }

        $('.nav-tabs li').eq(++_index).find('a').trigger('click');

    }

    // show task details
    $(document).delegate('.btn-task-details', 'click', function(e)
    {
        var $taskDetails = $('.task-details');

        if($taskDetails.hasClass('show'))
        {
            return;
        }
        $taskDetails.addClass('show');
    });

    $(document).delegate('.task-details .btn-task-close', 'click', function(e)
    {
        $('.task-details').removeClass('show');
    });

    $(document).click(function(e)
    {
        if($(e.target).closest('.btn-task-details, .task-details').size() > 0 )
        {
            return;
        }
        $('.task-details').removeClass('show');
    });
    

</script>
</html>